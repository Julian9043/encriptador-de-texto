<!DOCTYPE html>

<html lang="es">

	<head>
		<meta charset="UTF-8">
			
			<title>Encriptador de texto</title>
			<link rel="stylesheet" href="reset.css">
			<link rel="stylesheet" href="style.css">
			
	</head>
		
	<body>
	
		<header class="tituloprincipal" id="tituloprincipal">Encriptador de texto
	<!--	<script>
  const tituloprincipal = document.getElementById('tituloprincipal');
  let currentText = '1q2w3e4r5t6y7u8i9o0$%';
  let newText = 'Encriptador de texto';
  let index = 0;
  let intervalId;
  let timeoutId;

  function updateText() {
    if (index < newText.length) {
      currentText = currentText.slice(0, index) + newText[index] + currentText.slice(index + 3);
      tituloprincipal.innerHTML = currentText;
      index++;
      timeoutId = setTimeout(updateText, 200);
    } else {
      clearTimeout(timeoutId);
      intervalId = setInterval(switchText, 3000);
    }
  }

  function switchText() {
    currentText = newText;
    newText = (newText === 'ncriptador de texto') ? '1q2w3e4r5t6y7u8i9o0$%' : 'ncriptador de texto';
    index = 0;
    updateText();
  }

 updateText()
</script> -->



		</header>
		
		<!-- Biblioteca CryptoJS en tu archivo HTML -->
		
		<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>

		<!-- Crea un formulario para capturar el texto a encriptar y el texto encriptado -->
		
		<main class="formulario">
			<ul class="cajat">
				<li >
					<label class="texto1" for="plaintext">Escriba aqui su texto:</label>
					<br>
					
					<!-- Crea la caja para capturar el texto -->
					
					<textarea class="entrada" id="plaintext" name="plaintext" rows="0" cols="0" autofocus></textarea>
				
					<!-- Crea dos botones para encriptar y desencriptar el texto -->
				
					<button class="boton" onclick="encrypt()">Encriptar</button>
					<button class="boton" onclick="decrypt()">Desencriptar</button>
				</li>

				<li>
					<label class="texto2" for="ciphertext"></label>
					
					<p class="salida" id="result" name="ciphertext" ></p>
					 
					<!-- Crea dos botones para copiar el texto -->
					
					<button class="botoncopiar" id="copy-button">Copiar</button>
				</li>
			</ul>

		</main> 

		<!-- Crea un elemento canva para el fondo -->
		
		<canvas id="canvas" height ="400px"width ="600px";></canvas>


		<!-- Script necesario para crear el efecto Matrix -->
		
		<script>
		  
			//Configura el canvas para que ocupe la pantalla entera 
			
				canvas.height = window.screen.height;
				canvas.width = window.screen.width;

			// Una entrada en el array por columna de texto
			//cada valor represnta la posición y actual de la columna.  (en canvas 0 es en la parte superior y los valores positivos de y van disminuyendo)
			
			var columns = []
			for (i = 0; i < 256; columns[i++] = 1);

			//Ejecutado una vez por fotograma
			
			function step() {
				//Ligeramente oscurece todo el canvas dibujando un rectángulo negro casi trasnsparente sobre todo el canvas
				//Esto explica tanto el flash inicial de blanco a negro (por defecto el canvas es blanco y progresivamente se convierte en negro) como el fading de los caracteres.*/
				
				canvas.getContext('2d').fillStyle = 'rgba(0,0,0,0.05)';
				canvas.getContext('2d').fillRect(0, 0, canvas.width, canvas.height);
				
				//Color verde del texto
				
				canvas.getContext('2d').fillStyle = '#00ff0091';
				
				//Para cada clolumna
				
				columns.map(function (value, index) {
					
					var character = String.fromCharCode(25 + Math.random() * 66);
					
					//dibuja los caracteres
					
					canvas.getContext('2d').fillText(character,index * 10,value); //Texto mas posicion x y
					
					// Establece el tamaño del texto en px								
					
					canvas.getContext('2d').font = '15px sans-serif'; 
					
					//desplaza hacia abajo el carácter
					//si el carácter es menor de X# entonces hay una posibilidad aleatoria de que sea reseteado
					columns[index] = value > 308 + Math.random() * 1e4 ? 0 : value + 10
				})
			}

			//1000/33 = ~30 veces por segundo que inicia una secuencia
			setInterval(step, 33)
		

			<!-- Script necesario para encriptar y desencriptar el texto -->
		
		
		
			// Con esta funcion se resetean las dos cajas de texto
			
			window.onload = function() {
			
				// Caja de texto1
				
				document.getElementById('plaintext').value = '';
				
				// Caja de texto2
				
			//	document.getElementById('ciphertext').value = '';
			
			}		  
		  
			// Función para encriptar el texto
		  
			function encrypt() {
		  
				// Obtén el texto a encriptar y la clave
				
				var plaintext = document.getElementById('plaintext').value;
				var password = 'password';

				// Encripta el texto utilizando el algoritmo AES y la clave proporcionada
				
				var ciphertext = CryptoJS.AES.encrypt(plaintext, password);

				// Muestra el texto encriptado en el formulario
				
				document.getElementById('result').innerHTML = ciphertext;
			}


			// Función para desencriptar el texto
		 
			function decrypt() {
				
				// Obten el texto encriptado y la clave
				
				var ciphertext = document.getElementById('plaintext').value;
				
				//var ciphertext = document.getElementById('ciphertext').value; ()
				
				var password = 'password';

				// Desencripta el texto utilizando el algoritmo AES y la clave proporcionada
				
				var plaintext = CryptoJS.AES.decrypt(ciphertext, password);

				// Muestra el texto desencriptado en la caja de texto izquierdo
				
				document.getElementById('result').innerHTML = plaintext.toString(CryptoJS.enc.Utf8);
				
				//document.getElementById('plaintext').value = plaintext.toString(CryptoJS.enc.Utf8);
			}
		
		
			<!-- Boton copiar-->

		
			const ciphertext = document.getElementById('result');
			const copyButton = document.getElementById('copy-button');

			copyButton.addEventListener('click', () => {
				navigator.clipboard.writeText(result.innerHTML).then(function() {
				
					// Cambia el texto del boton al hacer click
				
					copyButton.innerHTML = 'Copiado';
					
					// Cambia el color del boton al hacer click
					
					copyButton.style.background = "#1F0";
					
					// Cambia el borde del boton al hacer click
					
					copyButton.style.border = "#1F0";
					
					// Determina el tiempo para volver al boton a su estado original
					
					setTimeout(resetButton, 3000);
			  },

			  function(err) {
				
				copyButton.setAttribute('title', 'Error al copiar el texto');
			  });
			});
			
			function resetButton() {
				copyButton.innerHTML = 'Copiar';
				copyButton.style.backgroundColor = '#3498db';
				
			}

		</script>
		
	</body>
</html>